# Contributor: Samuel Dionne-Riel <samuel@dionne-riel.com>
pkgname=firmware-asus-z00t
pkgver=0
pkgrel=2
_commit="d75a9d565250429ed5b06ed6c5d6f50cfadf9cb9"
pkgdesc="Firmware for asus-z00t"
url="https://github.com/F2F056C4-B868-4F9D-BF2A-45B9CD317E1D/asus-z00t-firmware"
arch="aarch64"
license="proprietary"
depends="wcnss-wlan"
source="$pkgname-$_commit.tar.gz::https://github.com/F2F056C4-B868-4F9D-BF2A-45B9CD317E1D/asus-z00t-firmware/archive/$_commit.tar.gz
	https://raw.githubusercontent.com/LineageOS/android_device_asus_msm8916-common/cm-14.1/wifi/WCNSS_qcom_cfg.ini"
options="!check !strip !archcheck !spdx"
builddir="$srcdir/asus-z00t-firmware-$_commit"

package() {
	for part in b00 b01 b02 b03 mdt; do
		install -Dm644 firmware/image/keymaste."$part" "$pkgdir"/lib/firmware/keymaster/keymaster."$part";
	done

	find etc-firmware/wlan/prima -type f |
	while read -r _i; do
		install -Dm644 "$_i" \
			"$pkgdir"/lib/firmware/wlan/prima/"$_i"
	done

	find firmware/image ! -name "keymaste*" -type f |
	while read -r _i; do
		install -Dm644 "$_i" \
			"$pkgdir"/lib/firmware/"$_i"
	done

	install -Dm644 "$srcdir"/WCNSS_qcom_cfg.ini \
		"$pkgdir"/lib/firmware/wlan/prima/
}
sha512sums="f6011a1b0f367eba1e03fa38ef3eba35340492934e9160d37bb1211b05025c39f27e1991a6df32b8a3de4f1c9463bf27846998de46d84e1a2f2c97cda321d4e7  firmware-asus-z00t-d75a9d565250429ed5b06ed6c5d6f50cfadf9cb9.tar.gz
284fe8cfceff62b07089db11f994571de18554aa5d94cda825c36c1ec64cffab0acd0ae797fdb49bdb37ca47944cbd738da709e9f858fb459866f38f17163c98  WCNSS_qcom_cfg.ini"
