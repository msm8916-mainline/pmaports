# Contributor: Bart Ribbers <bribbers@disroot.org>
# Maintainer: Bart Ribbers <bribbers@disroot.org>
pkgname=lipstick
#pkgver=0.34.16
pkgver=0.34.16_git20200320
pkgrel=0
_commit="a4037d478c478feb0a345ec0067c216f98e075f4" # Branch jb42170_qt5.12
pkgdesc="A project aimed at offering easy to modify user experiences for varying mobile device form factors"
url="https://git.sailfishos.org/mer-core/lipstick"
arch="all"
license="LGPL-2.1-only"
depends_dev="qt5-qtbase-dev qt5-qtdeclarative-dev qt5-qtsensors-dev qt5-qtwayland-dev qt5-qtsystems-dev mlite-dev keepalive-dev libresourceqt-dev libngf-qt-dev libusb-moded-qt-dev libmce-qt-dev nemo-qml-plugin-devicelock-dev ssu-sysinfo-dev nemo-qml-plugin-systemsettings-dev wayland-dev elogind-dev"
makedepends="$depends_dev doxygen graphviz qt5-qttools-dev qtchooser"
#source="https://git.sailfishos.org/mer-core/lipstick/-/archive/$pkgver/lipstick-$pkgver.tar.gz"
source="$pkgname-$_commit.tar.gz::https://git.sailfishos.org/neochapay/lipstick/-/archive/$_commit.tar.gz
	fix-systemd-check.patch
	remove-systemsettings-dep.patch
	"
builddir="$srcdir/$pkgname-$_commit"

build() {
	qmake-qt5
	make
}

package() {
	DESTDIR="$pkgdir" make install
}

sha512sums="80445eba3b155d3b0255744219c38a29126b812238497caa2efbd2619bcb3f56e53a02c5ff98642a3ffe23d89f473456d292f78b4224cdf0824ccd6cc256c1e0  lipstick-a4037d478c478feb0a345ec0067c216f98e075f4.tar.gz
6beb3f9bceeea5d3a780fb4503ad3496b445b20274994f56f004d9640db02255c2cbdeb99073a9f5e9523b6364d7a7702dc907d6fe80b6eceabaa00cca109e54  fix-systemd-check.patch
50aa165558e4d1792b497c1a14095fe723e54540d81660b6a6493ca59bc2eb2445358772523c43210d8d3d71b58ba5b61c3aa3e31bc8359a5edbadb706499265  remove-systemsettings-dep.patch"
