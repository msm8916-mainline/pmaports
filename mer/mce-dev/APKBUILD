# Contributor: Bart Ribbers <bribbers@disroot.org>
# Maintainer: Bart Ribbers <bribbers@disroot.org>
pkgname=mce-dev
pkgver=1.28.0
pkgrel=0
pkgdesc="Mers mce-dev"
url="https://git.sailfishos.org/mer-core/mce-dev"
arch="noarch"
license="LGPL-2.1-or-later"
makedepends="qt5-qtbase-dev doxygen"
subpackages="$pkgname-doc"
source="https://git.sailfishos.org/mer-core/mce-dev/-/archive/$pkgver/mce-dev-$pkgver.tar.gz
	fix-busybox-incompatibility.patch
	"
options="!check" # No test suite available

build() {
	make
	make doc
}

package() {
	DESTDIR="$pkgdir" make install
}

doc() {
	install -dm755 "$subpkgdir"/usr/share/doc/$pkgname
	mv "$builddir"/doc/html "$subpkgdir"/usr/share/doc/$pkgname/
}

sha512sums="bfca732a30cea703b92af7502bec45f356b28d454864b071d87b74c4bfac8eb656da05361030efefe747442e7abd7a9375284477f40f07aca6211fa2ab1814d9  mce-dev-1.28.0.tar.gz
53a1af05dad06877105dc15fd3d1399488f7f1bea944912ed7d4d82fa8ba7c330644ab1afc1f325a60d2dfdbc60ca366d26f82906efd268399ad8f9f17259927  fix-busybox-incompatibility.patch"
