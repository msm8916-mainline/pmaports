# Contributor: Bart Ribbers <bribbers@disroot.org>
# Maintainer: Bart Ribbers <bribbers@disroot.org>
pkgname=plasma-bigscreen
pkgver=0_git20200509
pkgrel=0
_commit="34dfc3f8718c2d410122c94c22040b5c56c5e828"
pkgdesc="A 10-feet interface made for TV's"
url="https://invent.kde.org/kde/plasma-bigscreen/"
arch="all"
license="Apache-2.0 AND LGPL-2.0-only AND LGPL-2.1-only AND GPL-2.0-only"
depends="plasma-workspace kirigami2"
makedepends="extra-cmake-modules qt5-qtbase-dev qt5-qtdeclarative-dev qt5-qtmultimedia-dev kactivities-dev kactivities-stats-dev plasma-framework-dev ki18n-dev kirigami2-dev kdeclarative-dev kcmutils-dev knotifications-dev kio-dev kwayland-dev kwindowsystem-dev plasma-workspace-dev"
source="https://invent.kde.org/kde/plasma-bigscreen/-/archive/$_commit/plasma-bigscreen-$_commit.tar.gz
	plasma-bigscreen.sh
	plasma-bigscreen.desktop
	"
builddir="$srcdir/plasma-bigscreen-$_commit"

build() {
	cmake -B build \
		-DCMAKE_BUILD_TYPE=None \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib
	cmake --build build
}

check() {
	cd build
	CTEST_OUTPUT_ON_FAILURE=TRUE ctest
}

package() {
	DESTDIR="$pkgdir" cmake --build build --target install

	install -Dm755 "$srcdir"/plasma-bigscreen.sh \
		"$pkgdir"/usr/bin/plasma-bigscreen

	install -Dm755 "$srcdir"/plasma-bigscreen.desktop \
		"$pkgdir"/usr/share/wayland-sessions/plasma-bigscreen.desktop
}

sha512sums="7baa2ba68b6ee3ed9f3b7d2deff6bb27e24fa222c9ed17c1f509ff05ded83b5f640352d8b0766ced01e41ef0a781bc9d2b54fa3d92397e2b65b6f284fafdfa13  plasma-bigscreen-34dfc3f8718c2d410122c94c22040b5c56c5e828.tar.gz
10a5675acc533ced1ce721cae01e2484e69f415f5236feab1d445eefae200d0437feb7dd6a637df2688226ef7b521d93b537daf6fcb1cf954cd662d8c3e9fd13  plasma-bigscreen.sh
d7b18b9ebbd1e2f1aad9e30d512c2203d6e610c715494aaa8fef0c63bd52e211b62a639c477073c26309b401af4e9183a5b54ab617eac6f74e58b45f4103d57b  plasma-bigscreen.desktop"
